
<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  
  
  

  <title>Forever Passwords Vue? WIP</title>

    <link rel="canonical" href="https://codepen.io/vpelss/pen/dPXWBmZ">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="manifest" href="./manifest.json"> 
<script type="importmap">
  {
    "imports": {
      "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
    }
  }
</script>
  
  
  
<style>
body{
  padding: 1%
  }

#divHeader{
  display: flex;
  text-align: center;
}

#Secret { /*fix / block password managers forcing fields to fill*/
    -webkit-text-security: disc;
}

input[type=text] {
  width: 100%;
  bbbbbox-sizing: border-box;
}
  
   /*! normalize.css v3.0.2 | MIT License | git.io/normalize */

/**
 * 1. Set default font family to sans-serif.
 * 2. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
  font-family: sans-serif; /* 1 */
  -ms-text-size-adjust: 100%; /* 2 */
  -webkit-text-size-adjust: 100%; /* 2 */
}

/**
 * Remove default margin.
 */

body {
  margin: 0;
}

/* HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined for any HTML5 element in IE 8/9.
 * Correct `block` display not defined for `details` or `summary` in IE 10/11
 * and Firefox.
 * Correct `block` display not defined for `main` in IE 11.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
  display: block;
}

/**
 * 1. Correct `inline-block` display not defined in IE 8/9.
 * 2. Normalize vertical alignment of `progress` in Chrome, Firefox, and Opera.
 */

audio,
canvas,
progress,
video {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Address `[hidden]` styling not present in IE 8/9/10.
 * Hide the `template` element in IE 8/9/11, Safari, and Firefox < 22.
 */

[hidden],
template {
  display: none;
}

/* Links
   ========================================================================== */

/**
 * Remove the gray background color from active links in IE 10.
 */

a {
  background-color: transparent;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
  outline: 0;
}

/* Text-level semantics
   ========================================================================== */

/**
 * Address styling not present in IE 8/9/10/11, Safari, and Chrome.
 */

abbr[title] {
  border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 4+, Safari, and Chrome.
 */

b,
strong {
  font-weight: bold;
}

/**
 * Address styling not present in Safari and Chrome.
 */

dfn {
  font-style: italic;
}

/**
 * Address variable `h1` font-size and margin within `section` and `article`
 * contexts in Firefox 4+, Safari, and Chrome.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/**
 * Address styling not present in IE 8/9.
 */

mark {
  background: #ff0;
  color: #000;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sup {
  top: -0.5em;
}

sub {
  bottom: -0.25em;
}

/* Embedded content
   ========================================================================== */

/**
 * Remove border when inside `a` element in IE 8/9/10.
 */

img {
  border: 0;
}

/**
 * Correct overflow not hidden in IE 9/10/11.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Grouping content
   ========================================================================== */

/**
 * Address margin not present in IE 8/9 and Safari.
 */

figure {
  margin: 1em 40px;
}

/**
 * Address differences between Firefox and other browsers.
 */

hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

/**
 * Contain overflow in all browsers.
 */

pre {
  overflow: auto;
}

/**
 * Address odd `em`-unit font size rendering in all browsers.
 */

code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

/* Forms
   ========================================================================== */

/**
 * Known limitation: by default, Chrome and Safari on OS X allow very limited
 * styling of `select`, unless a `border` property is set.
 */

/**
 * 1. Correct color not being inherited.
 *    Known issue: affects color of disabled elements.
 * 2. Correct font properties not being inherited.
 * 3. Address margins set differently in Firefox 4+, Safari, and Chrome.
 */

button,
input,
optgroup,
select,
textarea {
  color: inherit; /* 1 */
  font: inherit; /* 2 */
  margin: 0; /* 3 */
}

/**
 * Address `overflow` set to `hidden` in IE 8/9/10/11.
 */

button {
  overflow: visible;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Firefox, IE 8/9/10/11, and Opera.
 * Correct `select` style inheritance in Firefox.
 */

button,
select {
  text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button; /* 2 */
  cursor: pointer; /* 3 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
  cursor: default;
}

/**
 * Remove inner padding and border in Firefox 4+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}

/**
 * Address Firefox 4+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

input {
  line-height: normal;
}

/**
 * It's recommended that you don't attempt to style these elements.
 * Firefox's implementation doesn't respect box-sizing, padding, or width.
 *
 * 1. Address box sizing set to `content-box` in IE 8/9/10.
 * 2. Remove excess padding in IE 8/9/10.
 */

input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Fix the cursor style for Chrome's increment/decrement buttons. For certain
 * `font-size` values of the `input`, it causes the cursor style of the
 * decrement button to change from `default` to `text`.
 */

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box; /* 2 */
  box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari and Chrome on OS X.
 * Safari (but not Chrome) clips the cancel button when the search input has
 * padding (and `textfield` appearance).
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct `color` not being inherited in IE 8/9/10/11.
 * 2. Remove padding so people aren't caught out if they zero out fieldsets.
 */

legend {
  border: 0; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Remove default vertical scrollbar in IE 8/9/10/11.
 */

textarea {
  overflow: auto;
}

/**
 * Don't inherit the `font-weight` (applied by a rule above).
 * NOTE: the default cannot safely be changed in Chrome and Safari on OS X.
 */

optgroup {
  font-weight: bold;
}

/* Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
  border-collapse: collapse;
  border-spacing: 0;
}

td,
th {
  padding: 0;
}

/*
* Skeleton V2.0.4
* Copyright 2014, Dave Gamache
* www.getskeleton.com
* Free to use under the MIT license.
* http://www.opensource.org/licenses/mit-license.php
* 12/29/2014
*/


/* Table of contents
––––––––––––––––––––––––––––––––––––––––––––––––––
- Grid
- Base Styles
- Typography
- Links
- Buttons
- Forms
- Lists
- Code
- Tables
- Spacing
- Utilities
- Clearing
- Media Queries
*/


/* Grid
–––––––––––––––––––––––––––––––––––––––––––––––––– */
.container {
  position: relative;
  width: 100%;
  max-width: 960px;
  margin: 0 auto;
  padding: 0 20px;
  box-sizing: border-box; }
.column,
.columns {
  width: 100%;
  float: left;
  box-sizing: border-box; }

/* For devices larger than 400px */
@media (min-width: 400px) {
  .container {
    width: 85%;
    padding: 0; }
}

/* For devices larger than 550px */
@media (min-width: 550px) {
  .container {
    width: 80%; }
  .column,
  .columns {
    margin-left: 4%; }
  .column:first-child,
  .columns:first-child {
    margin-left: 0; }

  .one.column,
  .one.columns                    { width: 4.66666666667%; }
  .two.columns                    { width: 13.3333333333%; }
  .three.columns                  { width: 22%;            }
  .four.columns                   { width: 30.6666666667%; }
  .five.columns                   { width: 39.3333333333%; }
  .six.columns                    { width: 48%;            }
  .seven.columns                  { width: 56.6666666667%; }
  .eight.columns                  { width: 65.3333333333%; }
  .nine.columns                   { width: 74.0%;          }
  .ten.columns                    { width: 82.6666666667%; }
  .eleven.columns                 { width: 91.3333333333%; }
  .twelve.columns                 { width: 100%; margin-left: 0; }

  .one-third.column               { width: 30.6666666667%; }
  .two-thirds.column              { width: 65.3333333333%; }

  .one-half.column                { width: 48%; }

  /* Offsets */
  .offset-by-one.column,
  .offset-by-one.columns          { margin-left: 8.66666666667%; }
  .offset-by-two.column,
  .offset-by-two.columns          { margin-left: 17.3333333333%; }
  .offset-by-three.column,
  .offset-by-three.columns        { margin-left: 26%;            }
  .offset-by-four.column,
  .offset-by-four.columns         { margin-left: 34.6666666667%; }
  .offset-by-five.column,
  .offset-by-five.columns         { margin-left: 43.3333333333%; }
  .offset-by-six.column,
  .offset-by-six.columns          { margin-left: 52%;            }
  .offset-by-seven.column,
  .offset-by-seven.columns        { margin-left: 60.6666666667%; }
  .offset-by-eight.column,
  .offset-by-eight.columns        { margin-left: 69.3333333333%; }
  .offset-by-nine.column,
  .offset-by-nine.columns         { margin-left: 78.0%;          }
  .offset-by-ten.column,
  .offset-by-ten.columns          { margin-left: 86.6666666667%; }
  .offset-by-eleven.column,
  .offset-by-eleven.columns       { margin-left: 95.3333333333%; }

  .offset-by-one-third.column,
  .offset-by-one-third.columns    { margin-left: 34.6666666667%; }
  .offset-by-two-thirds.column,
  .offset-by-two-thirds.columns   { margin-left: 69.3333333333%; }

  .offset-by-one-half.column,
  .offset-by-one-half.columns     { margin-left: 52%; }

}


/* Base Styles
–––––––––––––––––––––––––––––––––––––––––––––––––– */
/* NOTE
html is set to 62.5% so that all the REM measurements throughout Skeleton
are based on 10px sizing. So basically 1.5rem = 15px :) */
html {
  font-size: 62.5%; }
body {
  font-size: 1.5em; /* currently ems cause chrome bug misinterpreting rems on body element */
  line-height: 1.6;
  font-weight: 400;
  font-family: "Raleway", "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, sans-serif;
  color: #222; }


/* Typography
–––––––––––––––––––––––––––––––––––––––––––––––––– */
h1, h2, h3, h4, h5, h6 {
  margin-top: 0;
  margin-bottom: 2rem;
  font-weight: 300; }
h1 { font-size: 4.0rem; line-height: 1.2;  letter-spacing: -.1rem;}
h2 { font-size: 3.6rem; line-height: 1.25; letter-spacing: -.1rem; }
h3 { font-size: 3.0rem; line-height: 1.3;  letter-spacing: -.1rem; }
h4 { font-size: 2.4rem; line-height: 1.35; letter-spacing: -.08rem; }
h5 { font-size: 1.8rem; line-height: 1.5;  letter-spacing: -.05rem; }
h6 { font-size: 1.5rem; line-height: 1.6;  letter-spacing: 0; }

/* Larger than phablet */
@media (min-width: 550px) {
  h1 { font-size: 5.0rem; }
  h2 { font-size: 4.2rem; }
  h3 { font-size: 3.6rem; }
  h4 { font-size: 3.0rem; }
  h5 { font-size: 2.4rem; }
  h6 { font-size: 1.5rem; }
}

p {
  margin-top: 0; }


/* Links
–––––––––––––––––––––––––––––––––––––––––––––––––– */
a {
  color: #1EAEDB; }
a:hover {
  color: #0FA0CE; }


/* Buttons
–––––––––––––––––––––––––––––––––––––––––––––––––– */
.button,
button,
input[type="submit"],
input[type="reset"],
input[type="button"] {
  display: inline-block;
  height: 38px;
  padding: 0 30px;
  color: #555;
  text-align: center;
  font-size: 11px;
  font-weight: 600;
  line-height: 38px;
  letter-spacing: .1rem;
  text-transform: uppercase;
  text-decoration: none;
  white-space: nowrap;
  background-color: transparent;
  border-radius: 4px;
  border: 1px solid #bbb;
  cursor: pointer;
  box-sizing: border-box; }
.button:hover,
button:hover,
input[type="submit"]:hover,
input[type="reset"]:hover,
input[type="button"]:hover,
.button:focus,
button:focus,
input[type="submit"]:focus,
input[type="reset"]:focus,
input[type="button"]:focus {
  color: #333;
  border-color: #888;
  outline: 0; }
.button.button-primary,
button.button-primary,
input[type="submit"].button-primary,
input[type="reset"].button-primary,
input[type="button"].button-primary {
  color: #FFF;
  background-color: #33C3F0;
  border-color: #33C3F0; }
.button.button-primary:hover,
button.button-primary:hover,
input[type="submit"].button-primary:hover,
input[type="reset"].button-primary:hover,
input[type="button"].button-primary:hover,
.button.button-primary:focus,
button.button-primary:focus,
input[type="submit"].button-primary:focus,
input[type="reset"].button-primary:focus,
input[type="button"].button-primary:focus {
  color: #FFF;
  background-color: #1EAEDB;
  border-color: #1EAEDB; }


/* Forms
–––––––––––––––––––––––––––––––––––––––––––––––––– */
input[type="email"],
input[type="number"],
input[type="search"],
input[type="text"],
input[type="tel"],
input[type="url"],
input[type="password"],
textarea,
select {
  height: 38px;
  padding: 6px 10px; /* The 6px vertically centers text on FF, ignored by Webkit */
  background-color: #fff;
  border: 1px solid #D1D1D1;
  border-radius: 4px;
  box-shadow: none;
  box-sizing: border-box; }
/* Removes awkward default styles on some inputs for iOS */
input[type="email"],
input[type="number"],
input[type="search"],
input[type="text"],
input[type="tel"],
input[type="url"],
input[type="password"],
textarea {
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none; }
textarea {
  min-height: 65px;
  padding-top: 6px;
  padding-bottom: 6px; }
input[type="email"]:focus,
input[type="number"]:focus,
input[type="search"]:focus,
input[type="text"]:focus,
input[type="tel"]:focus,
input[type="url"]:focus,
input[type="password"]:focus,
textarea:focus,
select:focus {
  border: 1px solid #33C3F0;
  outline: 0; }
label,
legend {
  display: block;
  margin-bottom: .5rem;
  font-weight: 600; }
fieldset {
  padding: 0;
  border-width: 0; }
input[type="checkbox"],
input[type="radio"] {
  display: inline; }
label > .label-body {
  display: inline-block;
  margin-left: .5rem;
  font-weight: normal; }


/* Lists
–––––––––––––––––––––––––––––––––––––––––––––––––– */
ul {
  list-style: circle inside; }
ol {
  list-style: decimal inside; }
ol, ul {
  padding-left: 0;
  margin-top: 0; }
ul ul,
ul ol,
ol ol,
ol ul {
  margin: 1.5rem 0 1.5rem 3rem;
  font-size: 90%; }
li {
  margin-bottom: 1rem; }


/* Code
–––––––––––––––––––––––––––––––––––––––––––––––––– */
code {
  padding: .2rem .5rem;
  margin: 0 .2rem;
  font-size: 90%;
  white-space: nowrap;
  background: #F1F1F1;
  border: 1px solid #E1E1E1;
  border-radius: 4px; }
pre > code {
  display: block;
  padding: 1rem 1.5rem;
  white-space: pre; }


/* Tables
–––––––––––––––––––––––––––––––––––––––––––––––––– */
th,
td {
  padding: 12px 15px;
  text-align: left;
  border-bottom: 1px solid #E1E1E1; }
th:first-child,
td:first-child {
  padding-left: 0; }
th:last-child,
td:last-child {
  padding-right: 0; }


/* Spacing
–––––––––––––––––––––––––––––––––––––––––––––––––– */
button,
.button {
  margin-bottom: 1rem; }
input,
textarea,
select,
fieldset {
  margin-bottom: 1.5rem; }
pre,
blockquote,
dl,
figure,
table,
p,
ul,
ol,
form {
  margin-bottom: 2.5rem; }


/* Utilities
–––––––––––––––––––––––––––––––––––––––––––––––––– */
.u-full-width {
  width: 100%;
  box-sizing: border-box; }
.u-max-full-width {
  max-width: 100%;
  box-sizing: border-box; }
.u-pull-right {
  float: right; }
.u-pull-left {
  float: left; }


/* Misc
–––––––––––––––––––––––––––––––––––––––––––––––––– */
hr {
  margin-top: 3rem;
  margin-bottom: 3.5rem;
  border-width: 0;
  border-top: 1px solid #E1E1E1; }


/* Clearing
–––––––––––––––––––––––––––––––––––––––––––––––––– */

/* Self Clearing Goodness */
.container:after,
.row:after,
.u-cf {
  content: "";
  display: table;
  clear: both; }


/* Media Queries
–––––––––––––––––––––––––––––––––––––––––––––––––– */
/*
Note: The best way to structure the use of media queries is to create the queries
near the relevant code. For example, if you wanted to change the styles for buttons
on small devices, paste the mobile query code up in the buttons section and style it
there.
*/


/* Larger than mobile */
@media (min-width: 200px) {}

/* Larger than phablet (also point when grid becomes active) */
@media (min-width: 550px) {}

/* Larger than tablet */
@media (min-width: 750px) {}

/* Larger than desktop */
@media (min-width: 1000px) {}

/* Larger than Desktop HD */
@media (min-width: 1200px) {}
</style>

  
  
  
</head>

<body>
  <div id="rootComponent">

  <div class="row">
    <div id="divHeader" class="one column">
      <a @click="open_menu">
        <?xml version="1.0" encoding="utf-8"?>
        <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
        <svg width="50%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 18L20 18" stroke="#000000" stroke-width="2" stroke-linecap="round" />
          <path d="M4 12L20 12" stroke="#000000" stroke-width="2" stroke-linecap="round" />
          <path d="M4 6L20 6" stroke="#000000" stroke-width="2" stroke-linecap="round" />
        </svg>
      </a>
    </div>
    <div class="eleven columns">
      <h6 class="u-full-width">fPw : Password Calculator</h6>
    </div>

  </div>

  <div_main_page class="u-full-width" v-bind:hidden="main_page_component_hidden">
    <form>
      <div class="row">
        <div class="ten columns">
          <datalist id="dataList" autocomplete="off"></datalist>
          <input type="text" id="Alias" autocomplete="off" list="dataList" placeholder="Site URL or Alias eg: mysite.com" onclick="this.select();this.value='';GeneratePW();" onkeyup="GeneratePW();" onchange="AliasChanged(this.value);">
        </div>
        <div class="two columns">
          <a class="button" onclick="if(confirm('This will delete ' + document.getElementById('Alias').value + ' from your list. Are you sure?')){Delete();}">X</a>
        </div>
      </div>

      <div>
        <input id="Secret" type="text" autocomplete="off" placeholder="Secret: A secure word or phrase" onkeyup="GeneratePW();" title="Your Alias and this Secret generate a unique Answer.">
      </div>

      <div>
        <input id="Answer" type="text" placeholder="Answer: A unique pw based on the Alias + Secret" readonly onclick="copytoclipboard('Answer');" title="This is your Answer to use.">
      </div>

      <label for="NoCharacterReplacements">
        <input type="radio" checked="true" id="NoCharacterReplacements" name="Character_Types" value="NoCharacterReplacements" onchange="GeneratePW();" title="Replaces no characters. Default.">
        <span class="label-body">No Character Replacements (default)</span>
      </label>

      <label for="NoSpecialCharacters">
        <input type="radio" id="NoSpecialCharacters" name="Character_Types" data-mini="true" value="NoSpecialCharacters" onchange="GeneratePW();" title="Replaces base64 special characters + with X, / with Q, and = (base64 padding) with Z">
        <span class="label-body">No Special Characters</span>
      </label>

      <div>
        <input type="radio" id="ForceSpecialCharacters" name="Character_Types" data-mini="true" value="ForceSpecialCharacters" onchange="GeneratePW();" title="If no special characters, replace last character with a !"> <label for="ForceSpecialCharacters">Force Special Characters</label>
      </div>

      <div>
        <input id="AliasComment" placeholder="Comments for Alias eg:13 characters,no special char" title="This is a field for a comment for the current Alias. For example, some sites may have special password requirements." size="50">
      </div>

      <table>
        <tr>
          <td><label for="resize">Answer Length</label></td>

          <td>
            <div id="outerresize">
              <select id="resize" name="resize" title="Select desired Answer length." onchange=" GeneratePW();" data-mini="true">
                <option value="8">
                  8
                </option>

                <option value="9">
                  9
                </option>

                <option value="10">
                  10
                </option>

                <option value="11">
                  11
                </option>

                <option value="12">
                  12
                </option>

                <option value="13">
                  13
                </option>

                <option value="14">
                  14
                </option>

                <option value="15">
                  15
                </option>

                <option value="16">
                  16
                </option>

                <option value="17">
                  17
                </option>

                <option value="18">
                  18
                </option>

                <option value="19">
                  19
                </option>

                <option value="20">
                  20
                </option>

                <option value="21">
                  21
                </option>

                <option value="22">
                  22
                </option>

                <option value="23">
                  23
                </option>

                <option value="24">
                  24
                </option>

                <option value="25">
                  25
                </option>

                <option value="26">
                  26
                </option>

                <option value="27">
                  27
                </option>

                <option value="28" selected>
                  28
                </option>
              </select>
            </div>
          </td>
        </tr>
      </table>

      <div>
        <input type="button" id="copybutton" data-mini="true" value="Copy / Save" title="Copies Answer to clipboard. Saves Alias and Comment to local cookie." onclick="GeneratePW(); addToList(); copytoclipboard('Answer');">
      </div>

      <div>
        <input type="button" id="clear_reset" data-mini="true" value="Clear / Reset" title="Clears Answer and Secret if any plus all settings to default. Saved Aliases are not changed. Clipboard set to 'cleared'." onclick="clear_reset_data();">
      </div>

      <div>
        <input type="checkbox" id="clear_timer" data-mini="true" value="" onchange="stop_timers();" title=""> <label for="clear_timer">Timed Clear</label>
      </div>
    </form>
    <div id="timer_alert"></div>
  </div_main_page>

  <div_menu_page v-bind:hidden="menu_page_component_hidden">
    <div>
      <a href="#ManageAliasList" class="button u-full-width">Copy/Restore/Alias List</a>
    </div>
    <center>Links below open in another page.</center>
    <div>
      <a href="https://vpelss.github.io/Forever_Passwords//README.md" class="button u-full-width" target="_blank" class="ui-btn ui-shadow ui-corner-all">Help/Read Me</a>
    </div>

    <div>
      <a href="https://github.com/vpelss/Forever_Passwords" target="_blank" class="button u-full-width">Github</a>
    </div>

    <div>
      <a href="https://vpelss.github.io/Forever_Passwords/Licence.txt" target="_blank" class="ui-btn ui-shadow ui-corner-all">Licence</a>
    </div>

    <div>
      <a href="https://www.emogic.com/cgi/fp/backup.php" target="blank" class="button u-full-width">Doesn't work?</a>
    </div>

    <div>
      <a href="#" id="install" class="button u-full-width">Install as PWA</a>
    </div>
  </div_menu_page>

  <div_alias_page v-bind:hidden="alias_list_page_component_hidden">
    <form>
      <div>
        <input type="button" value="Get Alias List" onclick="GetAliasList();">
      </div>

      <div>
        <input type="button" value="Save Alias List" onclick="if(confirm('This will change your list. Are you sure?')){SaveAliasList();}">
      </div>

      <div>
        <input type="button" value="Export Alias List to Clipboard" onclick="if(confirm('This will export all Alias, settings, and comments to clipboard. Are you sure?')){ ExportAll(); }">
      </div>

      <div>
        <textarea id="JSONSave" rows="3" cols="50" placeholder="Import/Export/Backup Alias List. Save the text generated in a safe location." title="You can import/export your current Alias list (which is saved in the local cookie). This is helful to move it to another computer or use it as a backup." class="u-full-width">
</textarea>
      </div>
    </form>
  </div_alias_page>

</div>
  
    <script id="rendered-js" type="module">
//https://vuejs.org/guide/quick-start#using-vue-from-cdn
// see <head> for js import map
import { createApp, ref } from "vue";
// Now I am a (M)odule! - Ralph
// so my functions are no longer global
//we need to make them global if html events will be calling them
//window.funct = funct;
//OR
//document.getElementById('Answer').addEventListener('click', copytoclipboard);
// https://stackoverflow.com/questions/53630310/use-functions-defined-in-es6-module-directly-in-html
const rootComponent = {
  setup() {
    const main_page_component_hidden = ref(0);
    const menu_page_component_hidden = ref(0);
    const alias_list_page_component_hidden = ref(0);
    
    function open_menu() {
      main_page_component_hidden.value = 1;
      menu_page_component_hidden.value = 0;
      alias_list_page_component_hidden.value = 1;
    }
    return {
      open_menu,
      main_page_component_hidden ,
      menu_page_component_hidden,
      alias_list_page_component_hidden
    };
  },
  components: {
    //#this way we need to place the imported component first
    //button_component,
  },
  data() {
    return {
      //main_page_component_hidden : mpch,
   
    };
  },
  _script: "#myScript",
  _template: `<_button_component />`, //inline
  _template: "#Main" //<template id="Main"></template>
};

const app = createApp(rootComponent);
app.mount("#rootComponent");

let GlobalAssociativeArray = {}; //Alias list + comments and settings //use JSON associative array to squash duplicates
let forever = new Date("October 17, 2050 03:24:00");
let yesterday = new Date("October 17, 2000 03:24:00");
let Cookie = {};
Cookie.day = 86400000;
Cookie.week = Cookie.day * 7;
Cookie.month = Cookie.day * 31;
Cookie.year = Cookie.day * 365;

if (!supports_html5_storage()) {
  alert(
    "This browser does not support local storage. Limited Alias list size as we are using cookies."
  );
}

document.body.onload = function () {
  BuildAliasSelect();
};

/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
/* SHA-1 (FIPS 180-4) implementation in JavaScript                    (c) Chris Veness 2002-2017  */
/*                                                                                   MIT Licence  */
/* www.movable-type.co.uk/scripts/sha1.html                                                       */
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
//modified to work with IE 11 by vp

/**
 * SHA-1 hash function reference implementation.
 *
 * This is an annotated direct implementation of FIPS 180-4, without any optimisations. It is
 * intended to aid understanding of the algorithm rather than for production use.
 *
 * While it could be used where performance is not critical, I would recommend using the 'Web
 * Cryptography API' (developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest) for the browser,
 * or the 'crypto' library (nodejs.org/api/crypto.html#crypto_class_hash) in Node.js.
 *
 * See csrc.nist.gov/groups/ST/toolkit/secure_hashing.html
 *     csrc.nist.gov/groups/ST/toolkit/examples.html
 */

/**
 * Generates SHA-1 hash of string.
 *
 * @param   {string} msg - (Unicode) string to be hashed.
 * @param   {Object} [options]
 * @param   {string} [options.msgFormat=string] - Message format: 'string' for JavaScript string
 *   (gets converted to UTF-8 for hashing); 'hex-bytes' for string of hex bytes ('616263' = 'abc') .
 * @param   {string} [options.outFormat=hex] - Output format: 'hex' for string of contiguous
 *   hex bytes; 'hex-w' for grouping hex bytes into groups of (4 byte / 8 character) words.
 * @returns {string} Hash of msg as hex character string.
 */

//build sha object
let Sha1 = {};
//Sha1.hash = function(msg, options)
function Sha1_hash(msg) {
  //Sha1.hash = function(msg) {
  const defaults = {
    msgFormat: "string",
    outFormat: "hex"
  };
  //const opt = Object.assign(defaults, options);  ie 11 balks
  const opt = defaults;

  switch (opt.msgFormat) {
    default: // default is to convert string to UTF-8, as SHA only deals with byte-streams
    case "string":
      msg = Sha1_utf8Encode(msg);
      break;
    case "hex-bytes":
      msg = Sha1_hexBytesToString(msg);
      break; // mostly for running tests
  }

  // constants [§4.2.1]
  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];

  // initial hash value [§5.3.1]
  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];

  // PREPROCESSING [§6.1.1]
  msg += String.fromCharCode(0x80); // add trailing '1' bit (+ 0's padding) to string [§5.1.1]

  // convert string msg into 512-bit/16-integer blocks arrays of ints [§5.2.1]
  const l = msg.length / 4 + 2; // length (in 32-bit integers) of msg + '1' + appended length
  const N = Math.ceil(l / 16); // number of 16-integer-blocks required to hold 'l' ints
  const M = new Array(N);

  for (let i = 0; i < N; i++) {
    M[i] = new Array(16);
    for (let j = 0; j < 16; j++) {
      // encode 4 chars per integer, big-endian encoding
      M[i][j] =
        (msg.charCodeAt(i * 64 + j * 4 + 0) << 24) |
        (msg.charCodeAt(i * 64 + j * 4 + 1) << 16) |
        (msg.charCodeAt(i * 64 + j * 4 + 2) << 8) |
        (msg.charCodeAt(i * 64 + j * 4 + 3) << 0);
    } // note running off the end of msg is ok 'cos bitwise ops on NaN return 0
  }
  // add length (in bits) into final pair of 32-bit integers (big-endian) [§5.1.1]
  // note: most significant word would be (len-1)*8 >>> 32, but since JS converts
  // bitwise-op args to 32 bits, we need to simulate this by arithmetic operators
  M[N - 1][14] = ((msg.length - 1) * 8) / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = ((msg.length - 1) * 8) & 0xffffffff;

  // HASH COMPUTATION [§6.1.2]
  for (let i = 0; i < N; i++) {
    const W = new Array(80);

    // 1 - prepare message schedule 'W'
    for (let t = 0; t < 16; t++) W[t] = M[i][t];
    for (let t = 16; t < 80; t++)
      W[t] = Sha1_ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);

    // 2 - initialise five working variables a, b, c, d, e with previous hash value
    let a = H[0],
      b = H[1],
      c = H[2],
      d = H[3],
      e = H[4];

    // 3 - main loop (use JavaScript '>>> 0' to emulate UInt32 variables)
    for (let t = 0; t < 80; t++) {
      const s = Math.floor(t / 20); // seq for blocks of 'f' functions and 'K' constants
      const T = (Sha1_ROTL(a, 5) + Sha1_f(s, b, c, d) + e + K[s] + W[t]) >>> 0;
      e = d;
      d = c;
      c = Sha1_ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }

    // 4 - compute the new intermediate hash value (note 'addition modulo 2^32' - JavaScript
    // '>>> 0' coerces to unsigned UInt32 which achieves modulo 2^32 addition)
    H[0] = (H[0] + a) >>> 0;
    H[1] = (H[1] + b) >>> 0;
    H[2] = (H[2] + c) >>> 0;
    H[3] = (H[3] + d) >>> 0;
    H[4] = (H[4] + e) >>> 0;
  }

  // convert H0..H4 to hex strings (with leading zeros)
  for (let h = 0; h < H.length; h++)
    H[h] = ("00000000" + H[h].toString(16)).slice(-8);

  // concatenate H0..H4, with separator if required
  const separator = opt.outFormat == "hex-w" ? " " : "";

  return H.join(separator);

  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
}
// end hash

/**
 * Function 'f' [§4.1.1].
 * @private
 */
//static f(s, x, y, z)  {
function Sha1_f(s, x, y, z) {
  //Sha1.f = function(s, x, y, z) {
  switch (s) {
    case 0:
      return (x & y) ^ (~x & z); // Ch()
    case 1:
      return x ^ y ^ z; // Parity()
    case 2:
      return (x & y) ^ (x & z) ^ (y & z); // Maj()
    case 3:
      return x ^ y ^ z; // Parity()
  }
}

/**
 * Rotates left (circular left shift) value x by n positions [§3.2.5].
 * @private
 */
//static ROTL(x, n) {
function Sha1_ROTL(x, n) {
  //Sha1.ROTL = function(x, n) {
  return (x << n) | (x >>> (32 - n));
}

//let utf8Encode = function (str)
function Sha1_utf8Encode(str) {
  //Sha1.utf8Encode = function(str) {
  return unescape(encodeURIComponent(str)); // monsur.hossa.in/2012/07/20/utf-8-in-javascript.html
}

function Sha1_hexBytesToString(hexStr) {
  // convert string of hex numbers to a string of chars (eg '616263' -> 'abc').
  //Sha1.hexBytesToString = function(hexStr) { // convert string of hex numbers to a string of chars (eg '616263' -> 'abc').
  //modified to work with IE 11
  //const str = hexStr.replace(' ', ''); // allow space-separated groups
  //return str === '' ? '' : str.match(/.{2}/g).map(byte => String.fromCharCode(parseInt(byte, 16))).join('');
  let bytes = [];
  for (let i = 0; i < hexStr.length - 1; i += 2)
    bytes.push(parseInt(hexStr.substr(i, 2), 16));

  return String.fromCharCode.apply(String, bytes);
}

function hex2bin(hexStr) {
  return Sha1_hexBytesToString(hexStr);
}

/*function buf2hex(buffer){ // buffer is an ArrayBuffer
				return Array.prototype.map.call(new Uint8Array(buffer), x => ('00' + x.toString(16)).slice(-2)).join('');
				}*/

function CheckForNoSpaces(id) {
  let t = document.getElementById(id);
  if (t.value.match(/\s/g)) {
    alert("Sorry, you are not allowed to enter any spaces");
    t.value = t.value.replace(/\s/g, "");
  }
}

document.addEventListener("dcopy", function (e) {
  e.clipboardData.setData(
    "text/plain",
    document.getElementById("Answer").value
  );
});

let secondsToErase = 30;
let countdown;
let countdowninterval;

function tick() {
  //every second count down one
  countdown--;
  document.getElementById("timer_alert").innerHTML =
    "Auto cleared in " + countdown + " seconds";
  if (countdown <= 0) {
    stop_timers();
    clear_reset_data();
    document.getElementById("timer_alert").innerHTML =
      "<font color=red>Important: Alias and Secret were deleted, but your password is still on the clipboard!</font>";
  }
}

function start_timers() {
  //on copy button or click on answer
  document.getElementById("timer_alert").innerHTML = "";
  countdown = secondsToErase;
  countdowninterval = setInterval(tick, 1000);
}

function stop_timers() {
  //after count downs OR typing -> GeneratePW() OR clear_reset
  clearInterval(countdowninterval);
  document.getElementById("timer_alert").innerHTML = "";
}
window.stop_timers = stop_timers;

function clear_reset_data() {
  document.getElementById("Alias").value = "";
  document.getElementById("AliasComment").value = "";
  document.getElementById("Secret").value = "";
  document.getElementById("Answer").value = "";
  copytoclipboard2("cleared");
  document.getElementById("resize").value = 28;
}
window.clear_reset_data = clear_reset_data;

function copytoclipboard(id) {
  //alert('IMPORTANT: Please click Clear/Reset AFTER pasting pw to clear the pw and clipboard!');
  let t = document.getElementById(id);
  //let t = this;
  t.select();
  document.execCommand(
    "copy",
    false,
    null
  ); /* Copy the text inside the text field */

  if (document.getElementById("clear_timer").checked) {
    start_timers();
  } else {
    clear_dialog();
  }
}
window.copytoclipboard = copytoclipboard;
//document.getElementById('Answer').addEventListener('click', copytoclipboard);

function clear_dialog() {
  //$( "#popupBasic" ).popup( "open" );

  let clear_me = confirm(
    "ERASE CLIPBOARD, ALIAS AND SECRET NOW ???\n\nYour password is saved on the clipboard.\nIt is suggested to paste your password now,\nthen click OK to clear all settings and the passwords from the clipboard (secure)\nOR\nCancel to leave it as is. (not secure)"
  );
  if (clear_me === true) {
    clear_reset_data();
  }
}

function copytoclipboard2(text) {
  let textarea = document.createElement("TEXTAREA");
  document.body.appendChild(textarea);
  textarea.innerHTML = text;
  textarea.value = text;
  textarea.select();
  document.execCommand("copy", false, null);
  textarea.remove();
}

//async function GeneratePW() //async is here incase we use digest / promise version
function GeneratePW() {
  //async is here in case we use digest / promise version
  stop_timers();
  let Alias = document.getElementById("Alias").value;
  CheckForNoSpaces("Alias");
  let Secret = document.getElementById("Secret").value;
  if (Secret === "") {
    document.getElementById("Answer").value = "";
    return;
  }
  let total = Secret + Alias;

  let v1 = Sha1_hash(total, ""); //sha1 160 bit, 20 byte, 40 hex
  //OR
  /*
			//see: https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest
			const encoder = new TextEncoder();
			const data = encoder.encode(total);
			const digest = crypto.subtle.digest( 'SHA-1' , data); //start promise 'digest'
			let value = await digest; //better than digest.then(function(value) //sha1 160 bit, 20 byte, 40 hex
			let v1 = buf2hex(value);
			*/

  let v2 = hex2bin(v1); //xxd or hex2bin - to binary stream
  let PW = btoa(v2); //BASE64 - binary to ascii base64

  //size adjust first!
  let size = document.getElementById("resize").options[
    document.getElementById("resize").selectedIndex
  ].value;
  PW = PW.slice(0, size);

  let pattern;
  if (document.getElementById("NoSpecialCharacters").checked == true) {
    //use capital X , Q , Z least used letters
    pattern = /[+]/g;
    PW = PW.replace(pattern, "X");
    pattern = /[/]/g;
    PW = PW.replace(pattern, "Q");
    pattern = /[=]/g;
    PW = PW.replace(pattern, "Z");
  }
  if (document.getElementById("ForceSpecialCharacters").checked == true) {
    //chech for + , / , = . If note, replace last char with =
    pattern = /[+/=]/g;
    if (!pattern.test(PW)) {
      PW = PW.replace(/.$/, "=");
    }
  }

  document.getElementById("Answer").value = PW;
}
window.GeneratePW = GeneratePW;

function BuildAliasSelect() {
  //runs on start up
  LocalStorageToVar();
  document.getElementById("dataList").innerHTML = ""; //erase current list
  // take GlobalAssociativeArray and add index to <select>
  for (let index in GlobalAssociativeArray)
    if (GlobalAssociativeArray.hasOwnProperty(index)) {
      let x = document.getElementById("dataList");
      let option = document.createElement("option");
      option.id = index;
      option.text = index;
      x.appendChild(option);
    }
}

function addToList() {
  let Alias = document.getElementById("Alias").value;

  //find and set Character_Types radio input
  let Character_Types;
  let elements = document.getElementsByName("Character_Types");
  for (let i = 0; i < elements.length; i++) {
    if (elements[i].checked) {
      Character_Types = elements[i].value;
      break;
    }
  }

  GlobalAssociativeArray[Alias] = {
    comment: document.getElementById("AliasComment").value,
    resize: document.getElementById("resize").value,
    Character_Types: Character_Types
    //'NoSpecialCharacters': document.getElementById('NoSpecialCharacters').checked
  }; //set as associative array

  VarToLocalStorage();
  BuildAliasSelect();
}
window.addToList = addToList;

function Delete() {
  let SelectedName = document.getElementById("Alias").value; //get Selected name
  let x = document.getElementById(SelectedName);
  x.remove(x.selectedIndex);
  //delete item from associative array
  delete GlobalAssociativeArray[SelectedName];
  VarToLocalStorage();
  document.getElementById("Alias").value = "";
}

function VarToLocalStorage() {
  let AliasListString = JSON.stringify(GlobalAssociativeArray);
  if (supports_html5_storage()) {
    localStorage.FP = AliasListString;
    setCookie("AliasList", "", yesterday, "", "", ""); //erase cookie as we want to use local storage now.
  } else {
    //save to cookie
    setCookie("AliasList", AliasListString, forever, "", "", "");
  }
}

function LocalStorageToVar() {
  if (supports_html5_storage()) {
    if (typeof localStorage.FP === "undefined") {
      return;
    } //nothing to restore
    GlobalAssociativeArray = JSON.parse(localStorage.FP);
  } else {
    let data = getCookie("AliasList") || "{}";
    GlobalAssociativeArray = JSON.parse(data);
  }
}

function getCookie(name) {
  let cookies = document.cookie;
  let start = cookies.indexOf(name + "=");
  if (start == -1) return null;
  let len = start + name.length + 1;
  let end = cookies.indexOf(";", len);
  if (end == -1) end = cookies.length;
  return unescape(cookies.substring(len, end));
}

function setCookie(name, value, expires, path, domain, secure) {
  value = escape(value);
  expires = expires ? ";expires=" + expires.toGMTString() : "";
  path = path ? ";path=" + path : "";
  domain = domain ? ";domain=" + domain : "";
  secure = secure ? ";secure" : "";

  document.cookie = name + "=" + value + expires + path + domain + secure;
}

function AliasChanged(value) {
  document.getElementById("resize").value = 28; //for the case of Saved_Local_Aliases that has no possible length set. 28 is default
  let Alias = value; //get Selected Alias
  //exit if Alias does not exist. For 1st dummy option
  if (typeof GlobalAssociativeArray[Alias] == "undefined") {
    GeneratePW(); //for Saved_Local_Aliases option that does not exist in the GlobalAssociativeArray by design
    document.getElementById("AliasComment").value = ""; //clear comments
    return;
  }
  //Get Comment
  if (typeof GlobalAssociativeArray[Alias].comment != "undefined") {
    document.getElementById("AliasComment").value =
      GlobalAssociativeArray[Alias].comment;
  } else {
    document.getElementById("AliasComment").value = "";
  }
  //get rezize
  document.getElementById("resize").value = 28; //default
  if (typeof GlobalAssociativeArray[Alias].resize != "undefined") {
    document.getElementById("resize").value =
      GlobalAssociativeArray[Alias].resize;
  }
  if (typeof $ == "function") {
    //if using jquery, refresh display is required
    $("#resize").selectmenu("refresh");
  }

  if (typeof GlobalAssociativeArray[Alias].Character_Types != "undefined") {
    //get Character_Types and set it's element's checked to true
    let id_is = GlobalAssociativeArray[Alias].Character_Types;
    document.getElementById(id_is).checked = true;
  } else {
    //set default
    document.getElementById("NoCharacterReplacements").checked = true;
  }
  if (typeof $ == "function") {
    //if using jquery, refresh display is required
    $(
      "#NoCharacterReplacements , #NoSpecialCharacters , #ForceSpecialCharacters"
    ).checkboxradio("refresh");
  }

  GeneratePW();
}
window.AliasChanged = AliasChanged;

function GetAliasList() {
  LocalStorageToVar();
  document.getElementById("JSONSave").value = JSON.stringify(
    GlobalAssociativeArray,
    null,
    "\t"
  );
}
window.GetAliasList = GetAliasList;

function SaveAliasList() {
  if (document.getElementById("JSONSave").value == "") {
    GlobalAssociativeArray = {};
  } else {
    GlobalAssociativeArray = JSON.parse(
      document.getElementById("JSONSave").value
    );
  }
  VarToLocalStorage();
  BuildAliasSelect();
}
window.SaveAliasList = SaveAliasList;

function supports_html5_storage() {
  try {
    return "localStorage" in window && window.localStorage !== null;
    //return false;
  } catch (e) {
    return false;
  }
}

function ExportAll() {
  LocalStorageToVar();
  copytoclipboard2(JSON.stringify(GlobalAssociativeArray));
  alert("All your Alias, settings, and comments are on the clipboard!");
}
window.ExportAll = ExportAll;

//button to instyall PWA
//https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/How_to/Trigger_install_prompt

let installPrompt = null;
const installButton = document.querySelector("#install");

window.addEventListener("beforeinstallprompt", (event) => {
  event.preventDefault();
  installPrompt = event;
  installButton.removeAttribute("hidden");
});

installButton.addEventListener("click", async () => {
  if (!installPrompt) {
    return;
  }
  const result = await installPrompt.prompt();
  console.log(`Install prompt was: ${result.outcome}`);
  disableInAppInstallPrompt();
});

function disableInAppInstallPrompt() {
  installPrompt = null;
  installButton.setAttribute("hidden", "");
}

// main.js

window.addEventListener("appinstalled", () => {
  disableInAppInstallPrompt();
});

window.addEventListener("beforeinstallprompt", async (event) => {
  const relatedApps = await navigator.getInstalledRelatedApps();

  // Search for a specific installed platform-specific app
  const psApp = relatedApps.find((app) => app.id === "/Forever_Passwords/");

  if (psApp) {
    event.preventDefault();
    // Update UI as appropriate
  }
});
  </script>

  
</body>

</html>
